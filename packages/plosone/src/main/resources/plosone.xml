<?xml version="1.0" encoding="UTF-8" ?>
<config>
  <hosts>
    <!-- Set hosts.default to FQHN (not localhost) for a singleboxinstall
         (or to webhead FQHN for multibox install) -->
    <default>localhost</default>
    <!-- For multibox install, change the following entires to the appropriate FQHNs -->
    <cas>${hosts.default}</cas>
    <fedora>${hosts.default}</fedora>
    <mulgara>${hosts.default}</mulgara>
    <plosone>${hosts.default}</plosone>
    <mailhost>${hosts.default}</mailhost>
  </hosts>
  <ports>
    <!-- For webhead, set default to empty (not 80) -->
    <default>${ports.plosone}</default>

    <plosone>8080</plosone>
    <plosone-ssl>10443</plosone-ssl>
    <cas-ssl>7443</cas-ssl>
    <fedora>9090</fedora>
    <mulgara>9091</mulgara>
  </ports>

  <single-box-hostname>${hosts.default}</single-box-hostname>
  <cas>
    <!-- This password is only needed on servers running cas -->
    <db><password>loot2_debonAir</password></db>

    <hostname>${hosts.cas}</hostname>
    <port>
      <https>${ports.cas-ssl}</https>
    </port>
    <url>
      <base>https://${cas.hostname}:${cas.port.https}/cas</base>
      <login>${cas.url.base}/login</login>
      <logout>${cas.url.base}/logout</logout>
      <proxy-receptor>${cas.url.base}/proxy</proxy-receptor>
      <proxy-validate>${cas.url.base}/proxyValidate</proxy-validate>
    </url>
  </cas>
  <plosone>
    <hostname>${hosts.default}</hostname>
    <port>
      <http>${ports.default}</http>
      <https>${ports.plosone-ssl}</https>
    </port>
    <app-context></app-context>
    <resource-sub-dir></resource-sub-dir>
    <host>${plosone.hostname}:${plosone.port.http}</host>
    <url>
      <proxy-callback>
        https://${plosone.hostname}:${plosone.port.https}${plosone.app-context}/CasProxyServlet
      </proxy-callback>
    </url>

    <!-- Stuff used by doi-resolver -->
    <webserver-url>http://${hosts.default}:${ports.default}${plosone.app-context}/</webserver-url>
    <article-action>article/fetchArticle.action?articleURI=</article-action>
    <figure-action1>article/slideshow.action?uri=</figure-action1>
    <figure-action2>&amp;imageURI=</figure-action2>
    <error-page>static/pageNotFound.action</error-page>

    <!-- common display constants -->
    <name>Public Library of Science</name>
    <email>
      <general>webmaster@plos.org</general>
    </email>
    <copyright>This work is licensed under a Creative Commons Attribution-Share Alike 3.0 License, http://creativecommons.org/licenses/by-sa/3.0/</copyright>

    <!-- defaults for generating a PLoS ONE Atom Feed -->
    <feed>
      <title>PLoS ONE Alerts: PLoS ONE Journal</title>
      <tagline>Publishing science, accelerating research</tagline>
      <icon>${plosone.host}/images/pone_favicon.ico</icon>
    </feed>
  </plosone>
  <plos-registration>
    <hostname>${hosts.cas}</hostname>
    <app-context>/plos-registration</app-context>
    <url>
      <base>
        https://${plos-registration.hostname}:${cas.port.https}${plos-registration.app-context}
      </base>
      <registration>${plos-registration.url.base}/register.action</registration>
      <change-password>${plos-registration.url.base}/changePassword.action</change-password>
      <change-email>${plos-registration.url.base}/changeEmail.action</change-email>
    </url>
  </plos-registration>

  <topaz>

    <!-- Configuration to talk to CAS -->
    <cas-server>
      <base-url>https://${hosts.cas}:${ports.cas-ssl}/cas</base-url>
    </cas-server>

    <services>
      <!-- Configuration to talk to Fedora -->
      <fedora>
        <base-url>http://${hosts.fedora}:${ports.fedora}/fedora/</base-url>
        <uri>${topaz.services.fedora.base-url}services/management</uri>
        <auth-method>BASIC</auth-method>
        <userName>fedoraAdmin</userName>
        <password>fedoraAdmin</password>
      </fedora>
      <fedoraUploader>
        <uri>${topaz.services.fedora.base-url}management/upload</uri>
        <auth-method>BASIC</auth-method>
        <userName>fedoraAdmin</userName>
        <password>fedoraAdmin</password>
      </fedoraUploader>

      <!-- Configuration to talk to Mulgara -->
      <itql>
        <uri>http://${hosts.mulgara}:${ports.mulgara}/mulgara-service/services/ItqlBeanService</uri>
        <auth-method>NONE</auth-method>
      </itql>
      <itql-admin>
        <uri>${topaz.services.itql.uri}</uri>
        <auth-method>NONE</auth-method>
      </itql-admin>
    </services>

    <utilities>
      <image-magick>
        <executable-path>/usr/bin/convert</executable-path>
        <temp-directory>/tmp</temp-directory>
      </image-magick>
    </utilities>

    <search>
      <indexpath>/var/lib/topaz/data/lucene</indexpath>
      <defaultfields>description,title,body,creator</defaultfields>
    </search>

    <fedoragsearch>
      <urls>
        <url>http://${hosts.plosone}:${ports.plosone}/ws-search-webapp/services/FedoraGenericSearchServicePort</url>
      </urls>
      <repository>Topaz</repository>
      <index>TopazIndex</index>
      <indexDocXslt>topazFoxmlToLucene</indexDocXslt>
      <resultPageXslt>copyXml</resultPageXslt>
      <fgsrepository>
        <fedoraSoap>${topaz.services.fedora.base-url}services</fedoraSoap>
        <fedoraUser>fedoraAdmin</fedoraUser>
        <fedoraPass>fedoraAdmin</fedoraPass>
      </fgsrepository>
    </fedoragsearch>

    <articles>
      <pdpName>standard-pdp</pdpName>
    </articles>
    <annotations>
      <pdpName>standard-pdp</pdpName>
    </annotations>
    <replies>
      <pdpName>standard-pdp</pdpName>
    </replies>
    <permissions>
      <pdpName>standard-pdp</pdpName>
    </permissions>
    <profiles>
      <pdpName>standard-pdp</pdpName>
    </profiles>
    <preferences>
      <pdpName>standard-pdp</pdpName>
    </preferences>
    <user-accounts>
      <pdpName>standard-pdp</pdpName>
    </user-accounts>
    <user-roles>
      <pdpName>standard-pdp</pdpName>
    </user-roles>
    <ratings>
      <pdpName>standard-pdp</pdpName>
    </ratings>
    <alerts>
      <pdpName>standard-pdp</pdpName>
    </alerts>
    <search>
      <pdpName>standard-pdp</pdpName>
    </search>
    <access>
      <pdpName>standard-pdp</pdpName>
    </access>
  </topaz>
</config>
