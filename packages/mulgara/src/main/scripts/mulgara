#!/usr/bin/env bash
# $HeadURL::                                                                   $
# $Id$
#
# Tomcat init script
# Copyright (c) 2006 by Topaz, Inc.
# http://topazproject.org
#
# Licensed under the Educational Community License version 1.0
# http://opensource.org/licenses/ecl1.php

# chkconfig: 2345 92 14
# description: mulgara rdf database

# Source function library (not really used but seems standard on redhat)
. /etc/init.d/functions

# Read our configuration from sysconfig (a redhat convention)
[ -e /etc/sysconfig/topaz ] && . /etc/sysconfig/topaz

# Try to set JAVA_HOME if not set above
[ -z "$JAVA_HOME" ] && JAVA_HOME=`find /opt -name 'jdk*' -maxdepth 1 | head -1`
export JAVA_HOME

# Start multicast for ecache
/usr/local/topaz/bin/multicast

# Start/stop/etc tomcat
/usr/local/topaz/bin/tomcat --basename $(basename `readlink -f $0`) $*
