<?xml version="1.0" encoding="UTF-8"?>
<config>
  
  <!-- plosOne.xml -->
  
  <!-- Define defaults for spring - must be redone soon -->
  <plosone>
    <spring>
      <hostname>${hosts.plosone}</hostname>
      <mailhost>${hosts.mailhost}</mailhost>
      <server>
        <plosone>${hosts.plosone}:${ports.plosone}</plosone>
        <cas>${hosts.cas}:${ports.cas-ssl}</cas>
        <search>${hosts.plosone}:${ports.plosone}</search>
        <mulgara>${hosts.mulgara}:${ports.mulgara}</mulgara>
      </server>
      <homesite>${hosts.default}</homesite>
      <service>
        <!-- This may need to be mucked with to be just one -->
        <search>${topaz.fedoragsearch.urls.url}</search>
      </service>
      <ingest>
        <source>/var/spool/plosone/ingestion-queue</source>
        <destination>/var/spool/plosone/ingested</destination>
      </ingest>
      <crossref>
        <plos>
          <doiurl>http://...</doiurl>        <!-- URL where your URIs can be found -->
          <email>webmaster@your-org</email>  <!-- email address to send info to -->
        </plos>
        <login>crossref-username</login>     <!-- crossref login -->
        <password>your-password</password>   <!-- crossref password -->
        <area>test</area>
        <sendToXref>false</sendToXref>       <!-- Set to true to turn on crossref posting -->
        <post><url>http://doi.crossref.org/servlet/deposit?operation=doMDUpload&amp;login_id=${plosone.spring.crossref.login}&amp;login_passwd=${plosone.spring.crossref.password}&amp;area=${plosone.spring.crossref.area}</url></post>
      </crossref>
      <itql><uri>http://${plosone.spring.server.mulgara}/mulgara-service/services/ItqlBeanService</uri></itql>
      <email><feedback>webmaster@plos.org</feedback></email>
      <!-- Temporary default for /etc/topaz/plosone.xml -->
      <hosts><mailhost>${hosts.default}</mailhost></hosts>
    </spring>
  </plosone>

  <single-box-hostname>localhost</single-box-hostname>
  <cas>
    <hostname>${single-box-hostname}</hostname>
    <port>
      <https>7443</https>
    </port>
    <url>
      <base>https://${cas.hostname}:${cas.port.https}/cas</base>
      <login>${cas.url.base}/login</login>
      <logout>${cas.url.base}/logout</logout>
      <proxy-receptor>${cas.url.base}/proxy</proxy-receptor>
      <proxy-validate>${cas.url.base}/proxyValidate</proxy-validate>
    </url>
  </cas>
  <plosone>
    <hostname>${single-box-hostname}</hostname>
    <port>
      <http>8080</http>
      <https>10443</https>
    </port>
    <app-context>/plosone-webapp</app-context>
    <resource-sub-dir></resource-sub-dir>
    <host>${plosone.hostname}:${plosone.port.http}</host>
    <url>               
      <proxy-callback>https://${plosone.hostname}:${plosone.port.https}${plosone.app-context}/CasProxyServlet</proxy-callback>
    </url>              
    <search>
      <snippetsMax>3</snippetsMax>          <!-- Number of snippets to show per document -->
      <fieldMaxLength>50</fieldMaxLength>   <!-- Max chars per indexed field? -->
      <cacheDuration>600000</cacheDuration> <!-- Milliseconds to cache search results -->
      <pageSize>10</pageSize>               <!-- Number of results per page -->
      <fetchSize>10</fetchSize>             <!-- Number of results to fetch at a time -->
    </search>
  </plosone>
  <plos-registration>
    <hostname>${cas.hostname}</hostname>
    <app-context>/plos-registration</app-context>
    <url>
      <base>https://${plos-registration.hostname}:${cas.port.https}${plos-registration.app-context}</base>
      <registration>${plos-registration.url.base}/register.action</registration>
      <change-password>${plos-registration.url.base}/changePassword.action</change-password>
      <change-email>${plos-registration.url.base}/changeEmail.action</change-email>
    </url>
  </plos-registration>

  <!-- topaz-config.xml -->
  
  <topaz>
    <life-cycle-listeners>
      <listener name="init-permissions-model">org.plos.bootstrap.permissions.WebAppListenerInitPermissionsModel</listener>
    </life-cycle-listeners>
    <permissions>
      <pdpName>_default_</pdpName>
      <impliedPermissions>
        <permission uri="annotations:getAnnotationInfo">
          <implies uri="urn:fedora:names:fedora:2.1:action:id-getDatastreamDissemination"/>
        </permission>
        <permission uri="annotations:getReplyInfo">
          <implies uri="urn:fedora:names:fedora:2.1:action:id-getDatastreamDissemination"/>
        </permission>
        <permission uri="annotations:deleteAnnotation">
          <implies uri="urn:fedora:names:fedora:2.1:action:purgeObject"/>
        </permission>
        <permission uri="annotations:deleteReply">
          <implies uri="urn:fedora:names:fedora:2.1:action:purgeObject"/>
        </permission>
      </impliedPermissions>
    </permissions>
    <ratings>
      <pdpName>_default_</pdpName>
    </ratings>
    <users>
      <pdpName>_default_</pdpName>
    </users>
    
    <life-cycle-listeners>
      <listener name="models">org.plos.bootstrap.WebAppListenerInitModels</listener>
      <listener name="ehcache">net.sf.ehcache.constructs.web.ShutdownListener</listener>
    </life-cycle-listeners>
  </topaz>

  <!-- plosOneFreemarker.xml -->

  <default>
    <title>PLoS ONE : Publishing science\, accelerating research</title>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_default.js</file>
      <file>/javascript/dojo/dojo_home.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/dojoRequire_default.ftl</file>
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>  
    </javascript>
  </default>

  <page>
    <name>/article/article_body.ftl</name>
    <title>CODE_ARTICLE_TITLE</title>
    <css>
      <file>/css/star_rating.css</file>
      <file>/css/pone_rating.css</file>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_article.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/annotation.js</file>      
      <file>/javascript/topaz/displayComment.js</file>
      <file>/javascript/topaz/rating.js</file>
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/topaz/floatingMenu.js</file>
      <file>/javascript/topaz/navigationUtil.js</file>
     	<!-- <file>/javascript/topaz/tooltipExtend.js</file> -->
      <file>/javascript/dojoRequire_article.ftl</file>
      <file>/javascript/formSetup_article.js</file>   
      <!-- <file>/javascript/topaz/errorConsole.js</file>    -->  
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_article.js</file>   
    </javascript>
  </page>

  <page>
    <name>/discussion/discussion.ftl</name>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_discussion.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/dojoRequire_discussion.ftl</file>
      <file>/javascript/topaz/responsePanel.js</file>   
      <!-- <file>/javascript/topaz/errorConsole.js</file>    --> 
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_discussion.js</file>   
    </javascript>
  </page>

  <page>
    <name>/discussion/startDiscussion.ftl</name>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_discussion.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/dojoRequire_discussion.ftl</file>
      <file>/javascript/topaz/responsePanel.js</file>   
      <!-- <file>/javascript/topaz/errorConsole.js</file>    -->
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_newDiscussion.js</file>   
    </javascript>
  </page>

  <page>
    <name>/rating/index.ftl</name>
    <css>
      <file>/css/star_rating.css</file>
      <file>/css/pone_rating.css</file>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_discussion.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/rating.js</file>
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/dojoRequire_discussion.ftl</file>
      <file>/javascript/topaz/responsePanel.js</file>   
      <!-- <file>/javascript/topaz/errorConsole.js</file>    --> 
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_discussion.js</file>   
    </javascript>
  </page>

  <page>
    <name>/article/imageWindow.ftl</name>
    <css>
      <file>/css/pone_images.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/config_slideshow.js</file>
      <file>/javascript/slideshowReference.ftl</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/dojoRequire_slideshow.ftl</file>
      <file>/javascript/topaz/slideshow.js</file>   
   <!-- <file>/javascript/topaz/errorConsole.js</file>    -->  
      <file>/javascript/init_slideshow.js</file>   
    </javascript>
  </page>

  <page>
    <name>/article/imageWindowLarge.ftl</name>
    <css>
      <file>/css/pone_images.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/dojoRequire_slideshow.ftl</file>
    </javascript>
  </page>

  <page>
    <name>/article/emailArticle.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/article/emailSuccess.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/feedback/feedbackEntry.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/feedback/feedbackSuccess.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/user/alerts.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>      
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
       <!-- <file>/javascript/topaz/errorConsole.js</file>    --> 
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
    </javascript>
  </page>

  <page>
    <name>/user/createNewUser.ftl</name>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/topaz/htmlUtil.js</file>
      <file>/javascript/dojoRequire_profile.ftl</file>
      <!-- <file>/javascript/topaz/errorConsole.js</file>    --> 
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_newProfile.js</file>
    </javascript>
  </page>

  <page>
    <name>/user/editPlosAlerts.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>      
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/topaz/htmlUtil.js</file>
      <file>/javascript/dojoRequire_profile.ftl</file>
      <!-- <file>/javascript/topaz/errorConsole.js</file>    -->   
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_plosAlerts.js</file>
    </javascript>
  </page>

  <page>
    <name>/user/editUser.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_forms.css</file>
      <file>/css/pone_static.css</file>
    </css>
    <javascript>
      <file>/javascript/browserDetection.js</file>
      <file>/javascript/dojo/dojo_plosone.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/formUtil.js</file>   
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/topaz/htmlUtil.js</file>
      <file>/javascript/dojoRequire_profile.ftl</file>
      <file>/javascript/config_profile.js</file>
      <file>/javascript/topaz/horizontalTabs.js</file>
      <!-- <file>/javascript/topaz/errorConsole.js</file>    -->   
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_profile.js</file>
    </javascript>
  </page>

  <page>
    <name>/static/browse.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/comment_guidelines.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/competing.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/contact.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/edboard.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/faq.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/figure_guidelines.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/guidelines.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/help.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/information.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/latex.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/license.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/media.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/policies.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/privacy.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/policies.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/reviwer_guidelines.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/static/rss_feeds.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/rss_info.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/serverError.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/sitemap.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/terms.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>

  <page>
    <name>/static/whypublish.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_static.css</file>
    </css>
  </page>
  
  <page>
    <name>/index.ftl</name>
    <css>
      <file>/css/pone_screen.css</file>
      <file>/css/pone_iepc.css</file>
      <file>/css/pone_home.css</file>
    </css>
    <javascript>
      <file>/javascript/dojo/dojo_home.js</file>
      <file>/javascript/topaz/topaz.js</file>      
      <file>/javascript/topaz/domUtil.js</file>
      <file>/javascript/topaz/htmlUtil.js</file>
      <file>/javascript/dojoRequire_default.ftl</file>
      <file>/javascript/config_home.js</file>
      <file>/javascript/topaz/horizontalTabs.js</file>
      <!-- <file>/javascript/topaz/errorConsole.js</file>    -->   
      <file>/javascript/init_global.js</file>  
      <file>/javascript/init_navigation.js</file>   
      <file>/javascript/init_home.js</file>
    </javascript>
  </page>
  
</config>
