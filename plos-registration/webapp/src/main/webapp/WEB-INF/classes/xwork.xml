<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.1.1//EN" "http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">
<!--
  - Copyright (c) 2006 by Topaz, Inc.
  - http://topazproject.org
  -
  - Licensed under the Educational Community License version 1.0
  - http://opensource.org/licenses/ecl1.php
  -->
<xwork>
    <include file="webwork-default.xml"/>

    <package name="default" extends="webwork-default">
      <result-types>
        <result-type name="freemarker"
          class="com.opensymphony.webwork.views.freemarker.FreemarkerResult" default="true" />
      </result-types>

      <interceptors>
        <interceptor-stack name="defaultPlosStack">
          <interceptor-ref name="exception"/>
          <interceptor-ref name="alias"/>
          <interceptor-ref name="servlet-config"/>
          <interceptor-ref name="prepare"/>
          <interceptor-ref name="i18n"/>
          <interceptor-ref name="chain"/>
          <interceptor-ref name="model-driven"/>
          <interceptor-ref name="static-params"/>
          <interceptor-ref name="params"/>
          <interceptor-ref name="conversionError"/>
          <interceptor-ref name="validation">
              <param name="excludeMethods">input,back,cancel,browse</param>
          </interceptor-ref>
          <interceptor-ref name="workflow">
              <param name="excludeMethods">input,back,cancel,browse</param>
          </interceptor-ref>
        </interceptor-stack>
      
      
        <interceptor-stack name="plosRegistrationStack">
          <interceptor-ref name="timer" />
          <!--<interceptor-ref name="logger"/>-->
          <interceptor-ref name="defaultPlosStack" />
        </interceptor-stack>
      </interceptors>
      <default-interceptor-ref name="plosRegistrationStack" />

      <default-action-ref name="home" />

      <action name="home">
          <result>/WEB-INF/pages/home.ftl</result>
      </action>

      <action name="register">
          <result>/pages/registration.ftl</result>
      </action>

      <action name="constants" class="org.plos.web.OtherConstantsAction"/>

      <action name="registerSubmit" class="org.plos.web.RegisterAction">
        <result name="input">/pages/registration.ftl</result>
        <result name="error">/pages/registration.ftl</result>
        <result name="success">/pages/registrationSuccess.ftl</result>
      </action>

      <action name="emailVerification" class="org.plos.web.ConfirmationAction">
        <result name="error">/WEB-INF/pages/registration/error.ftl</result>
        <result name="success">/pages/emailConfirmationSuccess.ftl</result>
      </action>

      <action name="forgotPassword">
        <result>/pages/forgotPassword.ftl</result>
      </action>

      <action name="forgotPasswordSubmit" class="org.plos.web.ForgotPasswordAction">
        <result name="input">/pages/forgotPassword.ftl</result>
        <result name="error">/pages/forgotPassword.ftl</result>
        <result name="success">/pages/forgotPasswordSuccess.ftl</result>
      </action>

      <action name="forgotPasswordVerify" class="org.plos.web.ForgotPasswordChangePasswordAction" method="validateResetPasswordRequest">
        <result name="input">/WEB-INF/pages/registration/error.ftl</result>
        <result name="error">/WEB-INF/pages/registration/error.ftl</result>
        <result name="success">/pages/forgotPasswordChange.ftl</result>
      </action>

      <action name="forgotPasswordChangeSubmit" class="org.plos.web.ForgotPasswordChangePasswordAction">
        <result name="input">/pages/forgotPasswordChange.ftl</result>
        <result name="error">/pages/forgotPasswordChange.ftl</result>
        <result name="success">/pages/changePasswordSuccess.ftl</result>
      </action>
 
      <action name="changePassword">
        <result>/pages/changePassword.ftl</result>
      </action>

      <action name="changePasswordSubmit" class="org.plos.web.ChangePasswordAction">
        <result name="input">/pages/changePassword.ftl</result>
        <result name="error">/pages/changePassword.ftl</result>
        <result name="success">/pages/changePasswordSuccess.ftl</result>
      </action>

    </package>
</xwork>
