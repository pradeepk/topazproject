<?xml version="1.0" encoding="UTF-8" ?>
<!--
  This file is the Ambra template for the Public Library of Science site. 
-->
<config>
  <ambra>
    <!-- virtual journal config -->
    <virtualJournals>
      <OverlayJournal>
        <description>Overlay Journal</description>
        <mappingPrefix>/journals/overlayJournal</mappingPrefix>
        <rules>
          <host>.*overlay.*</host>
          <plosJournal>OverlayJournal</plosJournal>
        </rules>
        <url>http://overlay.example.org</url>
        <!-- Atom feed overrides -->
        <platform>
          <feed>
            <title>Overlay Journal</title>
            <id>info:doi/10.1371/feed.ovrj</id>
          </feed>
        </platform>
      </OverlayJournal>
    </virtualJournals>
      
    <services>
      <doiResolver>
        <!-- 
          This is used to define which DOI regular expression maps to which URL in the DOI  resolver.
          The rules are applied sequentially from top to bottom and the first matching one will execute.
          If an error is encountered, or the article is not found, it will use the ambra.network.hosts.default,
          ambra.network.ports.default, and ambra.platform.appContext to construct the page not found url.
        -->
        <mappings>
          <journalMapping>
            <url>http://overly.example.org:${ambra.network.ports.default}${ambra.platform.appContext}/</url>
            <regex>10\.1234/journal\.ovrj\.\d{7}</regex>
          </journalMapping>
        </mappings>
      </doiResolver>
    </services>

    <freemarker>
      <!--
        # This section defines the various journals and the css and javascript files which should be
        # included on each page as well as the page title.  The values within the <default> tag are used
        # if any of the values are missing in the <page> definitions.  Note, that the title, css, and
        # javascript level values are entirely replaced, they are not additive.  Override config files
        # may define values for each of those three variables and they will supsercede values present
        # in subsequent config values.  The lookup for values is as follows:
        # 1. Page defined in journal
        # 2. Default value defined in journal
        # 3. Page defined in default journal
        # 4. Default value in default journal
        # To define an empty value for a certain page so that it doesn't use defaults, just put the
        # element tag with no value, e.g. <javascript></javascript>
      -->

      <!-- Overlay Journal. Anything you want to override must be listed here -->
      <journal>
        <name>OverlayJournal</name>
        <metaKeywords>Overlay Journal\, Secondary\, Generic\, Default</metaKeywords>
        <metaDescription>This is an example second journal on Ambra.</metaDescription>
        <articleTitlePrefix>Overlay Journal:</articleTitlePrefix>
        <displayName>Overlay Journal</displayName>
        <default>
          <title>
            Overlay Journal: Serving as an Example for the Ambra Configuration community
          </title>
        </default>
        <page>
          <name>/journals/overlayJournal/index.ftl</name>
          <css>
            <file>/css/screen.css</file>
            <file>/css/iepc.css</file>
            <file>/css/home.css</file>
            <file>/css/article_markup.css</file>
          </css>
          <javascript>
            <file>/javascript/dojo/dojo/dojo.js</file>
            <file>/javascript/dojo/dojo/ambra.js</file>
            <file>/javascript/config_home.js</file>
            <file>/javascript/init_global.js</file>
            <file>/javascript/init_navigation.js</file>
            <file>/javascript/init_home.js</file>
          </javascript>
        </page>
        <page>
          <name>/article/article_body.ftl</name>
          <title>CODE_ARTICLE_TITLE</title>
        </page>
        <page>
          <name>/journals/overlayJournal/static/about.ftl</name>
          <css>
            <file>/css/screen.css</file>
            <file>/css/iepc.css</file>
            <file>/css/static.css</file>
          </css>
        </page>
      </journal>
    </freemarker>
  </ambra>
</config>
