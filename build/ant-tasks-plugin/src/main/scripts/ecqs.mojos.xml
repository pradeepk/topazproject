<?xml version="1.0" encoding="UTF-8"?>
<!--
  $HeadURL::                                                                             $
  $Id$

  Copyright (c) 2006 by Topaz, Inc.
  http://topazproject.org

  Licensed under the Educational Community License version 1.0
  http://opensource.org/licenses/ecl1.php
-->
<pluginMetadata>
  <mojos>

    <mojo>
      <goal>ecqs-package</goal>

      <!-- this element refers to the Ant target we'll invoke -->
      <call>ecqs-package</call>
      <requiresProject>true</requiresProject>
      
      <description>
        Package esup-cas-quick-start with Topaz configuration files
      </description>

      <parameters>

        <parameter>
          <name>DEST_DIR</name>
          <property>DEST_DIR</property>
          <required>true</required>
          <defaultValue>${project.build.directory}/${project.build.finalName}</defaultValue>
        </parameter>

        <parameter>
          <name>SRC_ZIP</name>
          <property>SRC_ZIP</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/org/esup-portail/esup-cas-quick-start/2.0.6-1/esup-cas-quick-start-2.0.6-1.zip</defaultValue>
        </parameter>

        <parameter>
          <name>ROOT</name>
          <property>ROOT</property>
          <required>true</required>
          <defaultValue>esup-cas-quick-start-2.0.6-1</defaultValue>
        </parameter>

				<!-- cas-mod begin -->
        <parameter>
          <name>CAS_SERVER_LIB_PATH</name>
          <property>CAS_SERVER_LIB_PATH</property>
          <required>true</required>
          <defaultValue>custom/cas-server-patch/web/WEB-INF/lib</defaultValue>
        </parameter>

        <parameter>
          <name>CAS_MOD</name>
          <property>CAS_MOD</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/org/plosone/plosone-cas-mod/0.5-SNAPSHOT/plosone-cas-mod-0.5-SNAPSHOT.jar</defaultValue>
        </parameter>

        <parameter>
          <name>PASSWORD_MOD</name>
          <property>PASSWORD_MOD</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/org/plos/plos-registration-password-service/0.5-SNAPSHOT/plos-registration-password-service-0.5-SNAPSHOT.jar</defaultValue>
        </parameter>

        <parameter>
          <name>DATABASE_DRIVER</name>
          <property>DATABASE_DRIVER</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/postgresql/postgresql/8.1-407.jdbc3/postgresql-8.1-407.jdbc3.jar</defaultValue>
        </parameter>

        <parameter>
          <name>COMMONS_LOGGING</name>
          <property>COMMONS_LOGGING</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/commons-logging/commons-logging/1.0.4/commons-logging-1.0.4.jar</defaultValue>
        </parameter>

        <parameter>
          <name>COMMONS_DBCP</name>
          <property>COMMONS_DBCP</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/commons-dbcp/commons-dbcp/1.2.1/commons-dbcp-1.2.1.jar</defaultValue>
        </parameter>

        <parameter>
          <name>COMMONS_POOL</name>
          <property>COMMONS_POOL</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/commons-pool/commons-pool/1.3/commons-pool-1.3.jar</defaultValue>
        </parameter>

        <parameter>
          <name>COMMONS_COLLECTIONS</name>
          <property>COMMONS_COLLECTIONS</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/commons-collections/commons-collections/2.1/commons-collections-2.1.jar</defaultValue>
        </parameter>
				<!-- cas-mod end -->

      </parameters>
    </mojo>
    
    <mojo>
      <goal>ecqs-install</goal>

      <!-- this element refers to the Ant target we'll invoke -->
      <call>ecqs-install</call>
      <requiresProject>false</requiresProject>

      <description>
        Install the esup-cas-quick-start locally
      </description>

      <parameters>

        <parameter>
          <name>DEST_DIR</name>
          <property>DEST_DIR</property>
          <required>true</required>
          <defaultValue>${topazproject.install.dir}</defaultValue>
        </parameter>

        <parameter>
          <name>SRC_JAR</name>
          <property>SRC_JAR</property>
          <required>true</required>
          <defaultValue>${settings.localRepository}/org/topazproject/ecqs/2.0.6-1/ecqs-2.0.6-1.jar</defaultValue>
        </parameter>

        <parameter>
          <name>ROOT</name>
          <property>ROOT</property>
          <required>true</required>
          <defaultValue>esup-cas-quick-start-2.0.6-1</defaultValue>
        </parameter>

      </parameters>
    </mojo>
    
    <mojo>
      <goal>ecqs-start</goal>

      <!-- this element refers to the Ant target we'll invoke -->
      <call>ecqs-start</call>
      <requiresProject>false</requiresProject>

      <description>
        Start the esup-cas-quick-start tomcat server
      </description>

      <parameters>

        <parameter>
          <name>DEST_DIR</name>
          <property>DEST_DIR</property>
          <required>true</required>
          <defaultValue>${topazproject.install.dir}</defaultValue>
        </parameter>

        <parameter>
          <name>ROOT</name>
          <property>ROOT</property>
          <required>true</required>
          <defaultValue>esup-cas-quick-start-2.0.6-1</defaultValue>
        </parameter>

        <parameter>
          <name>SPAWN</name>
          <property>SPAWN</property>
          <required>true</required>
          <expression>${SPAWN}</expression>
          <defaultValue>false</defaultValue>
          <description>Whether we should spawn or not</description>
        </parameter>

      </parameters>
    </mojo>
    
    <mojo>
      <goal>ecqs-stop</goal>

      <!-- this element refers to the Ant target we'll invoke -->
      <call>ecqs-stop</call>
      <requiresProject>false</requiresProject>

      <description>
        Stop the esup-cas-quick-start tomcat server
      </description>

      <parameters>

        <parameter>
          <name>DEST_DIR</name>
          <property>DEST_DIR</property>
          <required>true</required>
          <defaultValue>${topazproject.install.dir}</defaultValue>
        </parameter>

        <parameter>
          <name>ROOT</name>
          <property>ROOT</property>
          <required>true</required>
          <defaultValue>esup-cas-quick-start-2.0.6-1</defaultValue>
        </parameter>

      </parameters>
    </mojo>
    
    <mojo>
      <goal>ecqs-uninstall</goal>

      <!-- this element refers to the Ant target we'll invoke -->
      <call>ecqs-uninstall</call>
      <requiresProject>false</requiresProject>

      <description>
        Uninstall esup-cas-quick-start from local machine
      </description>

      <parameters>

        <parameter>
          <name>DEST_DIR</name>
          <property>DEST_DIR</property>
          <required>true</required>
          <defaultValue>${topazproject.install.dir}</defaultValue>
        </parameter>

        <parameter>
          <name>ROOT</name>
          <property>ROOT</property>
          <required>true</required>
          <defaultValue>esup-cas-quick-start-2.0.6-1</defaultValue>
        </parameter>

      </parameters>
    </mojo>
  </mojos>
</pluginMetadata>
